{% extends 'system_app/base.html' %}
{% block content %}

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<figure class="highcharts-figure">
    <div id="container"></div>
    <p class="highcharts-description">
        This pie chart shows how the chart legend can be used to provide
        information about the individual slices.
    </p>
</figure>

<!-- {% for key, value in data_dict.items %}
<p>{{key}} {{value}}</p>
{% endfor %} -->

{% endblock content %}

{% block javascript %}

<script>

    // Build the chart

    var data_list = {{ data_list| safe}};
    console.log(data_list);
    // data_list = data_list.substring(1)
    // data_list = data_list.slice(0, -1)
    // console.log(data_list);
    // var array_data = JSON.parse("[" + data_list + "]")
    // console.log(array_data)


    Highcharts.chart('container', {
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
        },
        title: {
            text: 'Messages Category'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        accessibility: {
            point: {
                valueSuffix: '%'
            }
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: false
                },
                showInLegend: true
            }
        },
        series: [{
            name: 'Message percents',
            colorByPoint: true,
            data: data_list
        }]
    });

</script>
{% endblock javascript %}